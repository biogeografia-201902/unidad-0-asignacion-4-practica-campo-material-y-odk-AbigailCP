---
output: github_document
bibliography: biblio.bib
csl: apa.csl
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Guía de referencia para la práctica de campo

>Los viajes de campo nos ayudan a ratificar que sabemos poco o nada acerca de la naturaleza

No deberían existir obstáculos para salir al campo porque, a fin de cuentas, es allí donde podemos recoger datos y donde nos surgirán nuevas preguntas. Normalmente, durante una fase de exploración, los planes son inútiles, incluso molestos.

Sin embargo, cuando se trata de responder preguntas concretas, entonces hay que añadir una capa de planificación, que incluya preguntas de investigación y diseño de muestreo, preferiblemente con un enfoque de reproducibilidad (Buej! luego los administrativos te dirán que es más importante hacer 20 solicitudes de cheques, escribir 30 oficios y 10 informes, buscar 50 cotizaciones y cualquier otra vaina con tal de que no viajes; corre por tu vida en el momento que veas más papeles que datos).

Este repo aspira a cumplir con la misión de asesorarte mínimamente a planificar tu recogida de datos, reconociendo en todo caso que tanto el repo como la propia colecta de hormigas/datos son "trabajos en desarrollo".

## Enfoques

Basado en las preguntas de cada estudiante, se puede asumir que hay al menos dos enfoques en los estudios a realizar sobre hormigas:

### Relación con el hábitat

Varias personas plantearon preguntas sobre la posible variación en la composición de las comunidades de hormigas respecto de los hábitats del campus de la UASD. No disponemos de mucha información ambiental públicamente accesible sobre los hábitats, más allá de la cobertura estimada a partir de imágenes de satélite. Información ambiental adicional podrá colectarse por cada estudiante en el terreno, mediante los múltiples campos disponibles para ello en los formularios de ODK.

### Nidos

Surgió esta interesante propuesta de estudiar hormigueros. Si a esto se le añade un componente espacial, se podría obtener información interesante sobre patrones espaciales. La única complejidad en este caso consiste en tener que censar, con coordenadas y toma de muestras, cada hormiguero en las parcelas asignadas.

### ¿Acaso hay un tercer enfoque relacionado con cebos?

Parecería que surje un tercero, que es el tema del efecto que pueden tener los diferentes cebos en la preferencia según especies. Sin embargo, no encontré mucha "fuerza" en las preguntas formuladas sobre este tema, y pienso que se pueden agrupar en el enfoque "relación con el hábitat".

## Enfoques de trabajo y coberturas

Las parcelas asignadas a cada persona las obtuve ejecutando los trozos de código que verás a continuación, y que explico paso a paso. Si quieres saltar directamente a la lista de parcelas asignadas, presiona [aquí](#Parcelas-asignadas).

Creé una función para asignar las parcelas, que puedes consultar en [este siguiente *script*](parcelalea.R). La asignación se realiza siguiendo un muestreo estratificado-aleatorio. La siguiente línea de código carga la función `parcelalea` a la memoria para su uso posterior.

```{r}
source('parcelalea.R')
```

A continuación verás que cargo a memoria el archivo de parcelas 50x50 del campus UASD clasificadas de acuerdo a su cobertura predominante.

```{r, warning=F, message=F}
library(sf)
library(tidyverse)
library(kableExtra)
parcelas_uasd <- st_read('c50mpctgrp_para_googlemaps.gpkg')
```
![](mapa_quadrats.png)

[Aquí](https://drive.google.com/open?id=171pW12jdkDwmzJuwjocoVjnC7ns&usp=sharing) alojé el mapa estilizado que ves arriba, el cual puedes consultar con el navegador desde cualquier PC con conexión a Internet y también visualizarlo en el campo con el teléfono usando aplicaciones como Maps o el navegador propiamente.

Alternativamente, puedes descargar el archivo `.kmz` que contiene el diseño de parcelas desde [aquí](quadrats-uasd-50-x-50-m.kmz). Podrás verlo sin conexión a Internet usando tu aplicación preferida de SIG (GIS) en una PC o en tu movil. La forma más fácil de cargarlo es mediante [GoogleEarth](https://play.google.com/store/apps/details?id=com.google.earth). Puedes usar también [OruxMaps](www.oruxmaps.com) (no está disponible en la tienda de aplicaciones), o cualquier otra aplicación disponible que permita cargar archivos `.kmz`.

El siguiente bloque de código define qué tipos de coberturas tocan a cada persona visitar. Estos fueron definidos en función en función de las preguntas de investigación.

```{r, warning=F, message=F}
unique(parcelas_uasd$nombre) #Informativo, tipos de coberturas disponibles
estfuente <- paste0(
  'https://raw.githubusercontent.com/biogeografia-201902/',
  'miembros-y-colaboradores/master/suscripciones_github.txt'
)#Lista de estudiantes
estudiantes <- readLines(estfuente)
df <- data.frame(usuariogh = gsub(' .*$', '', estudiantes))
df[df$usuario=='BidelkisCastillo','tipos'][[1]] <- list(c('construido', 'suelo'))
df[df$usuario=='dahianagb07','tipos'][[1]] <- list(c('construido', 'suelo'))
df[df$usuario=='emdilone','tipos'][[1]] <- list(c('dosel', 'suelo'))
df[df$usuario=='enrique193','tipos'][[1]] <- list(c('dosel', 'construido'))
df[df$usuario=='jimenezsosa','tipos'][[1]] <- list(c('dosel', 'construido'))
df[df$usuario=='Jorge-Mutonen','tipos'][[1]] <- list(c('dosel', 'suelo'))
df[df$usuario=='Mangoland','tipos'][[1]] <- list(c('construido', 'suelo'))
df[df$usuario=='maritzafg','tipos'][[1]] <- list(c('construido', 'suelo'))
df[df$usuario=='merali-rosario','tipos'][[1]] <- list(c('construido', 'dosel'))
df[df$usuario=='yanderlin','tipos'][[1]] <- list(c('dosel', 'suelo'))
#La semilla ayuda a generar números aleatorios de forma reproducible
df$semilla <- sapply(
  df$usuario,
  function(x)
    gsub('\\D', '', substr(digest::digest(x, algo = 'md5'), 1, 10))
)
```

A continuación, asignación de enfoques de trabajo (relación con hábitat o nidos) en función de las preguntas de investigación:

```{r, warning=F, message=F}
df[df$usuario=='BidelkisCastillo','enfoque'] <- 'relación con el hábitat'
df[df$usuario=='dahianagb07','enfoque'] <- 'nidos'
df[df$usuario=='emdilone','enfoque'] <- 'relación con el hábitat'
df[df$usuario=='enrique193','enfoque'] <- 'nidos'
df[df$usuario=='jimenezsosa','enfoque'] <- 'relación con el hábitat'
df[df$usuario=='Jorge-Mutonen','enfoque'] <- 'relación con el hábitat'
df[df$usuario=='Mangoland','enfoque'] <- 'relación con el hábitat'
df[df$usuario=='maritzafg','enfoque'] <- 'nidos'
df[df$usuario=='merali-rosario','enfoque'] <- 'relación con el hábitat'
df[df$usuario=='yanderlin','enfoque'] <- 'relación con el hábitat'
```

```{r, eval=FALSE, echo=F}
# El siguiente trozo realizaría la asignación por persona de manera masiva. Ni se imprime ni se evalúa, sólo aparece aquí para fines de reproducibilidad:
sapply(
  as.character(df$usuario),
  function(x) {
    parcelalea(
      estudiante = x,
      tipos = df[df$usuario==x,'tipos'][[1]],
      semilla = df[df$usuario==x,'semilla']
    )
  }
)
```

## Parcelas asignadas

A continuación, la tabla por personas, según tipos de coberturas y enfoques (lee a continuación de la tabla para consultar las parcelas que te tocaron).
```{r}
kable(df)
```
&nbsp;

A continuación verás la relación de parcelas asignadas por persona. La función `parcelalea` elige, aleatoriamente, un número de parcelas dentro de los tipos de coberturas asignadas. Cada persona dispondrá de más parcelas para elegir que las que les toca muestrear. Así, si en el terreno se presentaran problemas que impidiesen ejecutar el muestreo en una parcela dada, se podrá elegir otra alternativamente.


### BidelkisCastillo. **Relación con el hábitat**
```{r}
x <- 'BidelkisCastillo'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### dahianagb07. **Nidos**
```{r}
x <- 'dahianagb07'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### emdilone. **Relación con el hábitat**
```{r}
x <- 'emdilone'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### enrique193. **Nidos**. Muestreo por conveniencia
```{r}
x <- 'enrique193'
enrtiposcob <- c(
  'próximas a sitios de comida',
  'alejadas de sitios de comida'
)
enrparcelas <- c(
  paste('Elegir al menos 6 de éstas:', paste(c(10, 18, 21, 22, 42, 50, 51, 79, 166, 167, 151), collapse = ', ')),
  paste('Elegir al menos 5 de éstas:', paste(c(68, 77, 81, 86, 109, 159, 170), collapse = ', '))
)
kable(
  data.frame(
    `Tipo de cobertura`= enrtiposcob,
    Parcelas = enrparcelas,
    check.names = F)
)
```
&nbsp;

### jimenezsosa. **Relación con el hábitat**
```{r}
x <- 'jimenezsosa'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### Jorge-Mutonen. **Relación con el hábitat**
```{r}
x <- 'Jorge-Mutonen'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### Mangoland. **Relación con el hábitat**
```{r}
x <- 'Mangoland'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### maritzafg. **Nidos**
```{r}
x <- 'maritzafg'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### merali-rosario. **Relación con el hábitat**
```{r}
x <- 'merali-rosario'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

### yanderlin. **Relación con el hábitat**
```{r}
x <- 'yanderlin'
parcelalea(
  estudiante = x,
  tipos = df[df$usuario==x,'tipos'][[1]],
  semilla = df[df$usuario==x,'semilla']
)
```
&nbsp;

Utiliza las siguientes listas de control en forma de tareas, para confirmar que dispones de lo necesario para iniciar la colecta de especímenes/datos.

## Tarea 1. Estudia el siguiente protocolo de recogida de datos según sea tu caso.

### Relación con hábitat

Si trabajas según el enfoque "relación con el hábitat", usarás cebos como método de muestreo por razones logística.  En el terreno, coloca tus cebos en el tipo de cobertura que corresponda dentro de la parcela. Pongo un ejemplo: BidelkisCastillo debe elegir una parcela, dentro de la cobertura "construido, acerado, etc.". Supongamos que elige la parcela 53, que tiene mayoritariamente dicha "cobertura", pero también tiene algunos (pocos) árboles y algo de edificaciones erguidas (que no es lo mismo que el acerado o el pavimento). BidelkisCastillo debe colocar sus cebos en algún lugar con acerado o pavimento, pero no bajo dosel, no dentro de edificaciones ni sobre suelo (con o sin herbáceas). Si por alguna razón la cobertura predominante no está en la parcela (porque haya cambiado, por error de cartografía, o simplemente porque se hace imposible por otras razones), debe elegirse, de la lista de parcelas asignadas, otra que caracterice correctamente a dicha cobertura.

En el enfoque "relación con el hábitat", colectarás las hormigas procedentes de los cebos. Dado que tendrás que muestrear 11 parcelas, cada parcela es un 

### Nidos

Si trabajas con "nidos", deberás hacer un censo lo más detallado posible de éstos en cada parcela, pero sólo en el tipo predominante de cobertura que corresponda. Pongo un ejemplo: dahianagb07 debe elegir una parcela dentro de la cobertura "suelo, herbáceas...". Supongamos que elige la parcela 10, donde está parte del *play*. dahianagb07 debe censar todos los nidos sobre suelo, pero no sobre pavimento ni acerado, ni dentro de edificaciones. Al igual que en el caso anterior, si por alguna razón la cobertura predominante no está en la parcela, debe elegirse, de la lista de parcelas asignadas, otra que caracterice correctamente a dicha cobertura.

Deberás tomar las coordenadas de cada nido, una mínima información ambiental, y colectarás de cinco a diez obreras en cada uno, preferiblemente de diferentes castas.


## Tarea 2. Descarga tu formulario de campo

### Formulario de campo para enfoque "relación con hábitat":" "Hormigas UASD HÁBITAT"

### Formulario de campo para enfoque "nidos": "Hormigas UASD NIDOS"

## Tarea 3. Revisa tu material de campo

* Frascos. El número de frascos dependerá mucho del enfoque que hayas elegido.
* Alcohol etílico al 70-80%.
* Pincel
* Cebo si trabajas en el enfoque "relación con el hábitat".
* Dispositivo Android + ODK Collect + Formularios descargados). Alternativamente, puedes usar formularios en papel


## Tarea 4. Sal al "campo"

* Seguridad

## Tarea final. Ajusta tus expectativas

* Es probable que, aun teniendo preguntas de investigación debidamente formuladas y un diseño de muestreo acorde a lo que quieres responder, te encuentres al final de los análisis con lo que a veces se denomina resultados negativos. Significa que podrías no encontrar un efecto, un patrón, y lo importante es que debes interpretarlo adecuadamente. Un resultado negativo es también un resultado, porque responde a unas preguntas y probablemente abre otras.

* No se trata de que hagas un completo estudio sobre hormigas, sino que ensayes técnicas de formulación de preguntas, y de recogida y análisis de datos, pensando en aplicarlo a algo más grande en el futuro. Tu tesis será un buen terreno para poner en práctica dichas técnicas.

* Finalmente, reconoce la limitación temporal. En 5 meses no podrás ver ni aplicar todas las técnicas biogeográficas que existen en el "mercado". Sin embargo, dispondrás de fuentes bibliográficas, nuevos recursos y nuevas herramientas para localizar soluciones a tus futuros problemas en ecología.

## Bibliografía de referencia brevemente comentada



## Referencias

